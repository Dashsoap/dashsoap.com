(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{291:function(a,t,s){"use strict";s.r(t);var n=s(0),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"一看就会-如何从0用webpack-打包一个vue项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一看就会-如何从0用webpack-打包一个vue项目"}},[a._v("#")]),a._v(" 一看就会! 如何从0用webpack 打包一个vue项目")]),a._v(" "),s("ol",[s("li",[a._v("这是一个使用 Vue CLI 创建出来的 Vue 项目基础结构")]),a._v(" "),s("li",[a._v("有所不同的是这里我移除掉了 vue-cli-service（包含 webpack 等工具的黑盒工具）")]),a._v(" "),s("li",[a._v("这里的要求就是直接使用 webpack 以及你所了解的周边工具、Loader、Plugin 还原这个项目的打包任务")]),a._v(" "),s("li",[a._v("尽可能的使用上所有你了解到的功能和特性")])]),a._v(" "),s("h2",{attrs:{id:"topic-one：-webpack-的构建流程主要环节"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#topic-one：-webpack-的构建流程主要环节"}},[a._v("#")]),a._v(" Topic One： webpack 的构建流程主要环节")]),a._v(" "),s("h3",{attrs:{id:"_1-首先我们要先定义入口文件和出口文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-首先我们要先定义入口文件和出口文件"}},[a._v("#")]),a._v(" 1.首先我们要先定义入口文件和出口文件")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//不管是dev/prod/common 我们都需要定义入口和出口文件")]),a._v("\nentry"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./src/main.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 这是我的入口文件")]),a._v("\n    output"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        filename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bundle.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        path"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'dist'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n")])])]),s("h3",{attrs:{id:"_2-然后我们需要安装各种各样的loader来处理文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-然后我们需要安装各种各样的loader来处理文件"}},[a._v("#")]),a._v(" 2.然后我们需要安装各种各样的loader来处理文件")]),a._v(" "),s("p",[a._v("先分析，我们这是一个"),s("code",[a._v("Vue")]),a._v("项目 所以理所应当的需要一个vue-loader")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" vue-loader\n")])])]),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/Dashsoap/PhoneBed/master/uPic/H0Ka2Y.png",alt:"安装截图"}})]),a._v(" "),s("p",[a._v("然后因为我们的Vue的文件里面是会写CSS代码的 所以理所应当要安装css-loader 的 这个在Vueloader的官方文件中也提示了。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" css-loader\n")])])]),s("p",[a._v("然后相应的 在webpack配置文件中配置这几个")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            test"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/\\.css$/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            use"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"style-loader"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'css-loader'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            test"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/\\.less$/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            use"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"style-loader"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'css-loader'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'less-loader'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h3",{attrs:{id:"_3-安装url-loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装url-loader"}},[a._v("#")]),a._v(" 3.安装url-loader")]),a._v(" "),s("p",[a._v("因为我们的Vue项目是有一个PNG的图片的 所以我们需要url-loader 来处理静态文件")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i url-loader -D\n\nwebpack --config ./webpack.prod/jd\n")])])]),s("p",[a._v("安装完我们先试着配置一下")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            test"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/\\.(jpg|png)$/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            loader"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'url-loader'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            options"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'[name].[ext]'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                esModule"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                limit"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1024")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//当图片大于5kb 将以url的形式导入")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("然后build 一下发现报错了\n"),s("img",{attrs:{src:"https://raw.githubusercontent.com/Dashsoap/PhoneBed/master/uPic/o4f5Vf.png",alt:"错误信息"}}),a._v(" "),s("code",[a._v("Cannot find module 'file-loader'")]),a._v(" 这是什么意思？")]),a._v(" "),s("p",[a._v("上面的注释我们提到过 urlloader 在图片大于5kb 的时候会以url的形式打包，那么大于5kb呢？")]),a._v(" "),s("p",[a._v("这时候我们就需要我们的file-loader  所以我们需要安装一个file-loader 即使我们没有配置它，但是url-loader 需要他。")]),a._v(" "),s("h2",{attrs:{id:"loader-和-plugin-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loader-和-plugin-的区别"}},[a._v("#")]),a._v(" loader 和 plugin 的区别")]),a._v(" "),s("p",[a._v("最后我们打包出来的文件只有js文件，而忽视了我们最重要的，index.html文件，这个时候我们就需要 "),s("code",[a._v("html-webpack-plugin")]),a._v(" 来帮我进行模板的搬运和打包")]),a._v(" "),s("p",[a._v("这时候就有同学就问了，诶！同学！刚刚我们用的都是loader  怎么这个叫plugin啊？")]),a._v(" "),s("p",[a._v("他们有啥区别咧？")]),a._v(" "),s("h3",{attrs:{id:"plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin"}},[a._v("#")]),a._v(" plugin")]),a._v(" "),s("p",[a._v("其实我们这个里面不只是用了html-webpack-plugin 这一个 plugin 我们在导入vue的loader 的时候 其实同时还使用了"),s("code",[a._v("VueLoaderPlugin")])]),a._v(" "),s("h4",{attrs:{id:"配置plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置plugin"}},[a._v("#")]),a._v(" 配置plugin")]),a._v(" "),s("p",[a._v("1.plugin是和module平级的 在安装之后先在webpac.config 文件中导入")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" VueLoaderPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"vue-loader/lib/plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" HtmlWebpackPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"html-webpack-plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[a._v("2.然后我们需要new一个对象，对这个plugin进行配置，总体思路和loader 差不多")]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("VueLoaderPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HtmlWebpackPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            template"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./public/index.html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            title"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Zjt\'s App"')]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("webpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("DefinePlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("BASE_URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"'/'\"")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n\n")])])]),s("p",[a._v("template和title都是我们在index.html 文件里面定义的模板变量")]),a._v(" "),s("h3",{attrs:{id:"差异在哪？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#差异在哪？"}},[a._v("#")]),a._v(" 差异在哪？")]),a._v(" "),s("p",[a._v("对于loader，它是一个转换器，将A文件进行编译形成B文件，这里操作的是文件，比如将A.scss转换为A.css，单纯的文件转换过程")]),a._v(" "),s("p",[a._v("plugin是一个扩展器，它丰富了webpack本身，针对是loader结束后，webpack打包的整个过程，它并不直接操作文件，而是基于事件机制工作，会监听webpack打包过程中的某些节点，执行广泛的任务")]),a._v(" "),s("h2",{attrs:{id:"最后附上完整的webpack-config-js地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#最后附上完整的webpack-config-js地址"}},[a._v("#")]),a._v(" 最后附上完整的webpack.config.js地址")]),a._v(" "),s("p",[a._v("完整代码 "),s("a",{attrs:{href:"https://github.com/Dashsoap/webpack-vue/blob/master/webpack.dev.js",target:"_blank",rel:"noopener noreferrer"}},[a._v("地址"),s("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);